UPMC_Q13 <- "Q13.1"
old_UO_PKBS_names <- paste(UO_Q407, num_items,sep = "_")
old_UO_PKBS_names2 <- paste(UO_Q359, num_items,sep = "_")
old_UO_PKBS_names3 <- paste(UO_Q524, num_items,sep = "_")
old_UO_PKBS_names4 <- paste(UO_Q817, num_items,sep = "_")
old_UPMC_PKBS_names <- paste(UPMC_Q16, num_items,sep = "_")
old_UPMC_PKBS_names2 <- paste(UPMC_Q13, num_items, sep = "_")
setnames(UO_T1_PKBS, old_UO_PKBS_names, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T2_PKBS, old_UO_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T3_PKBS, old_UO_PKBS_names3, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T4_PKBS, old_UO_PKBS_names4, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T1_PKBS, old_UPMC_PKBS_names, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T2_PKBS, old_UPMC_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T3_PKBS, old_UPMC_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T4_PKBS, old_UPMC_PKBS_names, new_PKBS_names, skip_absent=FALSE)
UO_T1_PKBS <- select(UO_T1_PKBS, c(FamID = Q221, contains("pkbs")))
UO_T2_PKBS <- select(UO_T2_PKBS, c(FamID = Q116, contains("pkbs")))
UO_T3_PKBS <- select(UO_T3_PKBS, c(FamID = Q174, contains("pkbs")))
UO_T4_PKBS <- select(UO_T4_PKBS, c(FamID = Q203, contains("pkbs")))
UPMC_T1_PKBS <- select(UPMC_T1_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T2_PKBS <- select(UPMC_T2_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T3_PKBS <- select(UPMC_T3_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T4_PKBS <- select(UPMC_T4_PKBS, c(FamID = Q1.2, contains("pkbs")))
PKBS_T1 <- rbind(UO_T1_PKBS, UPMC_T1_PKBS)
PKBS_T2 <- rbind(UO_T2_PKBS, UPMC_T2_PKBS)
PKBS_T3 <- rbind(UO_T3_PKBS, UPMC_T3_PKBS)
PKBS_T4 <- rbind(UO_T4_PKBS, UPMC_T4_PKBS)
View(PKBS_T1)
rm(UO_T1_PKBS, UO_T2_PKBS, UO_T3_PKBS, UO_T4_PKBS, UPMC_T1_PKBS, UPMC_T2_PKBS, UPMC_T3_PKBS, UPMC_T4_PKBS)
Pedigree_T1 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time1Date, MomAge_T1)
Pedigree_T2 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time2Date, MomAge_T2)
Pedigree_T3 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time3Date, MomAge_T3)
Pedigree_T4 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time4Date, MomAge_T4)
PKBS_T1 <- merge(Pedigree_T1, PKBS_T1, by = "FamID")
PKBS_T2 <- merge(Pedigree_T2, PKBS_T2, by = "FamID")
PKBS_T3 <- merge(Pedigree_T3, PKBS_T3, by = "FamID")
PKBS_T4 <- merge(Pedigree_T4, PKBS_T4, by = "FamID")
rm(Pedigree, Pedigree_T1, Pedigree_T2, Pedigree_T3, Pedigree_T4)
PKBS_T1$Timepoint <- "Time 1"
PKBS_T2$Timepoint <- "Time 2"
PKBS_T3$Timepoint <- "Time 3"
PKBS_T4$Timepoint <- "Time 4"
View(PKBS_T1)
View(PKBS_T2)
View(PKBS_T3)
View(PKBS_T4)
PKBS_T1 <- PKBS_T1 %>% rename( interview_date = Time1Date, interview_age = MomAge_T1)
PKBS_T2 <- PKBS_T2 %>% rename( interview_date = Time2Date, interview_age = MomAge_T2)
PKBS_T3 <- PKBS_T3 %>% rename( interview_date = Time3Date, interview_age = MomAge_T3)
PKBS_T4 <- PKBS_T4 %>% rename( interview_date = Time4Date, interview_age = MomAge_T4)
PKBS_Prep <- rbind(PKBS_T1, PKBS_T2, PKBS_T3, PKBS_T4)
rm(PKBS_T1, PKBS_T2, PKBS_T3, PKBS_T4)
PKBS_Prep[PKBS_Prep == "Never (0)"] <- 0; PKBS_Prep[PKBS_Prep == "Rarely (1)"] <- 1;
PKBS_Prep[PKBS_Prep == "Sometimes (2)"] <- 2; PKBS_Prep[PKBS_Prep == "Often (3)"] <- 3;
PKBS_Prep[,7:39] <- sapply(PKBS_Prep[,7:39],as.numeric)
View(PKBS_Prep)
View(PKBS_Prep)
PKBS_Prep  <- add_column(PKBS_Prep, pkbs_total = rowSums(PKBS_Prep[, c("srm_pkbs_01", "srm_pkbs_02","srm_pkbs_03","srm_pkbs_04", "srm_pkbs_05", "srm_pkbs_06",
"srm_pkbs_07", "srm_pkbs_08", "srm_pkbs_09", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33")]),.after = "srm_pkbs_33")
PKBS_Prep  <- add_column(PKBS_Prep, pkbs_total = rowSums(PKBS_Prep[, c("srm_pkbs_01", "srm_pkbs_02","srm_pkbs_03","srm_pkbs_04", "srm_pkbs_05", "srm_pkbs_06",
"srm_pkbs_07", "srm_pkbs_08", "srm_pkbs_09", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33")]),.after = "srm_pkbs_33")
PKBS_Prep  <- add_column(PKBS_Prep, pkbs_total = rowSums(PKBS_Prep[, c("srm_pkbs_1", "srm_pkbs_2","srm_pkbs_3","srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33")]),.after = "srm_pkbs_33")
NDA_PKBS <- read.csv("acceptance01_template.csv", skip = 1)
NDA_PKBS <- read.csv("pkbs01_template.csv", skip = 1)
#Merge PKBS Prep Sheet into NDA structure
NDA_PKBS <- bind_rows(NDA_PKBS, PKBS_Prep)
View(NDA_PKBS)
View(PKBS_Prep)
NDA_PKBS_Prep <- list("srm_pkbs_1", "srm_pkbs_2", "srm_pkbs_3", "srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33")
PKBS_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social 14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
NDA_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social 14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
setnames(NDA_PKBS, NDA_PKBS_Prep, NDA_names)
setnames(PKBS_Prep, NDA_PKBS_Prep, NDA_names)
NDA_names <- list(c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social 14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw"))
setnames(PKBS_Prep, NDA_PKBS_Prep, NDA_names)
NDA_PKBS_Prep <- list(c("srm_pkbs_1", "srm_pkbs_2", "srm_pkbs_3", "srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33", "srm_pkbs_total"))
NDA_names <- list(c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social 14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw"))
setnames(PKBS_Prep, NDA_PKBS_Prep, NDA_names)
#Create list of column names for PKBS prep and NDA structure
PKBS_header <- colnames(PKBS_Prep)
help("select")
PKBS_NDA_Prep_names <- select(PKBS_header, starts_with("srm"))
PKBS_NDA_Prep_names <- select_if(PKBS_header, starts_with("srm"))
PKBS_NDA_Prep_names <- rename_at(PKBS_header, starts_with("srm"), .funs = list(NDA_names))
NDA_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social 14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
PKBS_NDA_Prep_names <- rename_at(PKBS_header, starts_with("srm"), .funs = list(NDA_names))
NDA_names <- list(Social2, Social7, Social10, Social12, Social16, Social22, Social23, Social16,
Social22, Social23, Social25, Social28, Social29, Social30, Social32, Social5,
Social14, Social15, Social17, Social19, Social20, Social21, Social24, Social27,
Social33, Social34, Social1, Social3, Social6, Social8, P_soc_23_ft, Social11,
Social13, Social18, Social26, Social31, basic_social_raw)
PKBS_NDA_Prep_names <- rename_at(PKBS_header, starts_with("srm"), .funs = list(NDA_names))
error(Error in UseMethod("tbl_vars") :
no applicable method for 'tbl_vars' applied to an object of class "character")
NDA_names <- vars(Social2, Social7, Social10, Social12, Social16, Social22, Social23, Social16,
Social22, Social23, Social25, Social28, Social29, Social30, Social32, Social5,
Social14, Social15, Social17, Social19, Social20, Social21, Social24, Social27,
Social33, Social34, Social1, Social3, Social6, Social8, P_soc_23_ft, Social11,
Social13, Social18, Social26, Social31, basic_social_raw)
NDA_PKBS_Prep <- list("srm_pkbs_1", "srm_pkbs_2", "srm_pkbs_3", "srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33", "srm_pkbs_total")
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, NDA_names, NDA_PKBS_Prep)
NDA_PKBS_Prep <- vars("srm_pkbs_1", "srm_pkbs_2", "srm_pkbs_3", "srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33", "srm_pkbs_total")
NDA_names <- list(Social2, Social7, Social10, Social12, Social16, Social22, Social23, Social16,
Social22, Social23, Social25, Social28, Social29, Social30, Social32, Social5,
Social14, Social15, Social17, Social19, Social20, Social21, Social24, Social27,
Social33, Social34, Social1, Social3, Social6, Social8, P_soc_23_ft, Social11,
Social13, Social18, Social26, Social31, basic_social_raw)
NDA_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, NDA_PKBS_Prep, NDA_names)
NDA_PKBS_Prep <- vars("srm_pkbs_1", "srm_pkbs_2", "srm_pkbs_3", "srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33", "pkbs_total")
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, NDA_PKBS_Prep, NDA_names)
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, NDA_PKBS_Prep, .fun = list(NDA_names))
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, NDA_PKBS_Prep, list(NDA_names))
NDA_names <- vars("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, NDA_PKBS_Prep, list(NDA_names))
PKBS_NDA_Prep_names <- rename_at(PKBS_Prep, PKBS_header, list(NDA_names))
help(colnames)
help(names)
help(setnames)
NDA_PKBS_Prep <- list("srm_pkbs_1", "srm_pkbs_2", "srm_pkbs_3", "srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33", "pkbs_total")
NDA_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
setnames(PKBS_Prep, NDA_PKBS_Prep, NDA_names)
setnames(PKBS_Prep, PKBS_header, NDA_names)
View(NDA_PKBS)
setnames(NDA_PKBS, PKBS_header, NDA_names)
View(NDA_PKBS)
setnames(PKBS_Prep, new_PKBS_names, NDA_names)
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(c("mom_guid", "famIDmother", "mom_gender", "interview_age", "interview_date", starts_with("srm")))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(c("mom_guid", "famIDmother", "mom_gender", "interview_age", "interview_date", startsWith("srm")))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_PREP, c(subjectkey = mom_guid, src_subject_id = mother_FamID, sex = mother_sex ,interview_age, interview_date, starts_with("srm")))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = mother_FamID, sex = mother_sex ,interview_age, interview_date, starts_with("srm")))
View(PKBS_Prep)
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_mother, sex = mother_sex ,interview_age, interview_date, starts_with("srm")))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = mother_sex ,interview_age, interview_date, starts_with("srm")))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, starts_with("srm")))
View(NDA_PKBS_Prep)
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, starts_with("srm"), pkbs_total))
NDA_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
setnames(PKBS_Prep, new_PKBS_names, NDA_names)
help(setnames)
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
NDA_names <- list("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
NDA_names <- c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social16",
"Social22", "Social23", "Social25", "Social28", "Social29", "Social30", "Social32", "Social5",
"Social14", "Social15", "Social17", "Social19", "Social20", "Social21", "Social24", "Social27",
"Social33", "Social34", "Social1", "Social3", "Social6", "Social8", "P_soc_23_ft", "Social11",
"Social13", "Social18", "Social26", "Social31", "basic_social_raw")
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
NDA_names <- c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social25",
"Social28", "Social29", "Social30", "Social32", "Social5", "Social14", "Social15", "Social17",
"Social19", "Social20", "Social21", "Social24", "Social27", "Social33", "Social34", "Social1",
"Social3", "Social6", "Social8", "P_soc_23_ft", "Social11", "Social13", "Social18", "Social26",
"Social31", "basic_social_raw")
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
NDA_names <- c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social25",
"Social28", "Social29", "Social30", "Social32", "Social5", "Social14", "Social15", "Social17",
"Social19", "Social20", "Social21", "Social24", "Social27", "Social33", "Social34", "Social1",
"Social3", "Social6", "Social8", "P_soc_23_ft", "Social11", "Social13", "Social18", "Social26",
"Social31")
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
setnames(PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
View(NDA_PKBS_Prep)
View(PKBS_Prep)
setnames(NDA_PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
View(NDA_PKBS_Prep)
colnames(NDA_PKBS_Prep)["pkbs_total"] <- "basc_social_raw"
NDA_PKBS_Prep(c("pkbs_total")) <- "basc_social_raw"
colnames(NDA_PKBS_Prep)[39] <- "basc_social_raw"
PKBS_Prep <- c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender, pkbs_total = basc_social_raw)
View(PKBS_Prep)
PKBS_Prep <- c(subjectkey = "mom_guid", src_subject_id = FamID_Mother, sex = MomGender, pkbs_total = basc_social_raw)
PKBS_Prep <- c(subjectkey = "mom_guid", src_subject_id = "FamID_Mother", sex = "MomGender", basc_social_raw = "pkbs_total")
#Merge PKBS Prep Sheet into NDA structure
NDA_PKBS <- bind_rows(NDA_PKBS, NDA_PKBS_Prep)
View(NDA_PKBS)
#Merge PKBS Prep Sheet into NDA structure
NDA_PKBS <- bind_rows(NDA_PKBS, NDA_PKBS_Prep)
View(NDA_PKBS)
#Merge PKBS Prep Sheet into NDA structure
NDA_PKBS <- bind_rows(NDA_PKBS_Prep, NDA_PKBS)
View(NDA_PKBS)
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, visit = Timepoint, starts_with("srm"), pkbs_total))
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, visit = Timepoint, starts_with("srm"), pkbs_total))
NDA_names <- c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social25",
"Social28", "Social29", "Social30", "Social32", "Social5", "Social14", "Social15", "Social17",
"Social19", "Social20", "Social21", "Social24", "Social27", "Social33", "Social34", "Social1",
"Social3", "Social6", "Social8", "P_soc_23_ft", "Social11", "Social13", "Social18", "Social26",
"Social31")
setnames(NDA_PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
colnames(NDA_PKBS_Prep)[39] <- "basc_social_raw"
#Merge PKBS Prep Sheet into NDA structure
NDA_PKBS <- bind_rows(NDA_PKBS_Prep, NDA_PKBS)
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, visit = Timepoint, starts_with("srm"), pkbs_total))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, visit = "Timepoint", starts_with("srm"), pkbs_total))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, starts_with("srm"), pkbs_total))
help("add_column")
edigree <- read.csv("Reference_Pedigree.csv")
NDA_PKBS <- read.csv("pkbs01_template.csv", skip = 1)
#Import PKBS files from both sites and every timepoint
UO_T1_PKBS <- read.csv("UO_T1_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T1_PKBS <- read.csv("UPMC_T1_PKBS.csv", stringsAsFactors = FALSE)
UO_T2_PKBS <- read.csv("UO_T2_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T2_PKBS <- read.csv("UPMC_T2_PKBS.csv", stringsAsFactors = FALSE)
UO_T3_PKBS <- read.csv("UO_T3_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T3_PKBS <- read.csv("UPMC_T3_PKBS.csv", stringsAsFactors = FALSE)
UO_T4_PKBS <- read.csv("UO_T4_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T4_PKBS <- read.csv("UPMC_T4_PKBS.csv", stringsAsFactors = FALSE)
#Rename variables that we want to select for PKBS
#Create list of new variable names
pkbs <- "srm_pkbs"
num_items <- seq(1:33)
new_PKBS_names <- paste(pkbs, num_items, sep='_')
#Now make a list of old variables names so that we can replace them with the neww ones
UO_Q407 <- "Q407"
UO_Q359 <- "Q359"
UO_Q524 <- "Q524"
UO_Q817 <- "Q817"
UPMC_Q16 <- "Q16.1"
UPMC_Q13 <- "Q13.1"
old_UO_PKBS_names <- paste(UO_Q407, num_items,sep = "_")
old_UO_PKBS_names2 <- paste(UO_Q359, num_items,sep = "_")
old_UO_PKBS_names3 <- paste(UO_Q524, num_items,sep = "_")
old_UO_PKBS_names4 <- paste(UO_Q817, num_items,sep = "_")
old_UPMC_PKBS_names <- paste(UPMC_Q16, num_items,sep = "_")
old_UPMC_PKBS_names2 <- paste(UPMC_Q13, num_items, sep = "_")
#Change UO column names
setnames(UO_T1_PKBS, old_UO_PKBS_names, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T2_PKBS, old_UO_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T3_PKBS, old_UO_PKBS_names3, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T4_PKBS, old_UO_PKBS_names4, new_PKBS_names, skip_absent=FALSE)
#Change UPMC column names
setnames(UPMC_T1_PKBS, old_UPMC_PKBS_names, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T2_PKBS, old_UPMC_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T3_PKBS, old_UPMC_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T4_PKBS, old_UPMC_PKBS_names, new_PKBS_names, skip_absent=FALSE)
#Edit UO PKBS Times 1-4 to have only PKBS questions and the FamID
UO_T1_PKBS <- select(UO_T1_PKBS, c(FamID = Q221, contains("pkbs")))
UO_T2_PKBS <- select(UO_T2_PKBS, c(FamID = Q116, contains("pkbs")))
UO_T3_PKBS <- select(UO_T3_PKBS, c(FamID = Q174, contains("pkbs")))
UO_T4_PKBS <- select(UO_T4_PKBS, c(FamID = Q203, contains("pkbs")))
#Edit UPMC PKBS Times 1-4 to have only PKBS questions and the FamID
UPMC_T1_PKBS <- select(UPMC_T1_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T2_PKBS <- select(UPMC_T2_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T3_PKBS <- select(UPMC_T3_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T4_PKBS <- select(UPMC_T4_PKBS, c(FamID = Q1.2, contains("pkbs")))
#Merge UO and UPMC data by Timepoint
PKBS_T1 <- rbind(UO_T1_PKBS, UPMC_T1_PKBS)
PKBS_T2 <- rbind(UO_T2_PKBS, UPMC_T2_PKBS)
PKBS_T3 <- rbind(UO_T3_PKBS, UPMC_T3_PKBS)
PKBS_T4 <- rbind(UO_T4_PKBS, UPMC_T4_PKBS)
#Clean up environment
rm(UO_T1_PKBS, UO_T2_PKBS, UO_T3_PKBS, UO_T4_PKBS, UPMC_T1_PKBS, UPMC_T2_PKBS, UPMC_T3_PKBS, UPMC_T4_PKBS)
#Create the Pedigree table for each timepoint
Pedigree_T1 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time1Date, MomAge_T1)
Pedigree_T2 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time2Date, MomAge_T2)
Pedigree_T3 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time3Date, MomAge_T3)
Pedigree_T4 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time4Date, MomAge_T4)
#Merge Pedigree data to PKBS timepoints
PKBS_T1 <- merge(Pedigree_T1, PKBS_T1, by = "FamID")
PKBS_T2 <- merge(Pedigree_T2, PKBS_T2, by = "FamID")
PKBS_T3 <- merge(Pedigree_T3, PKBS_T3, by = "FamID")
PKBS_T4 <- merge(Pedigree_T4, PKBS_T4, by = "FamID")
#Clean up environment
rm(Pedigree, Pedigree_T1, Pedigree_T2, Pedigree_T3, Pedigree_T4)
#Create new column designating time point for each database
PKBS_T1$Timepoint <- "Time 1"
PKBS_T2$Timepoint <- "Time 2"
PKBS_T3$Timepoint <- "Time 3"
PKBS_T4$Timepoint <- "Time 4"
#Rename each of the Date and Age columns so that they match
PKBS_T1 <- PKBS_T1 %>% rename( interview_date = Time1Date, interview_age = MomAge_T1)
PKBS_T2 <- PKBS_T2 %>% rename( interview_date = Time2Date, interview_age = MomAge_T2)
PKBS_T3 <- PKBS_T3 %>% rename( interview_date = Time3Date, interview_age = MomAge_T3)
PKBS_T4 <- PKBS_T4 %>% rename( interview_date = Time4Date, interview_age = MomAge_T4)
#Merge all timepoints together to create the PKBS prep sheet
PKBS_Prep <- rbind(PKBS_T1, PKBS_T2, PKBS_T3, PKBS_T4)
#Clean up environment
rm(PKBS_T1, PKBS_T2, PKBS_T3, PKBS_T4)
#Turn Likert Scale from text string to numeric value
PKBS_Prep[PKBS_Prep == "Never (0)"] <- 0; PKBS_Prep[PKBS_Prep == "Rarely (1)"] <- 1;
PKBS_Prep[PKBS_Prep == "Sometimes (2)"] <- 2; PKBS_Prep[PKBS_Prep == "Often (3)"] <- 3;
# Change number to numeric values and Create Calculated Column
PKBS_Prep[,7:39] <- sapply(PKBS_Prep[,7:39],as.numeric)
PKBS_Prep  <- add_column(PKBS_Prep, pkbs_total = rowSums(PKBS_Prep[, c("srm_pkbs_1", "srm_pkbs_2","srm_pkbs_3","srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33")]),.after = "srm_pkbs_33")
View(PKBS_Prep)
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = mom_guid, src_subject_id = FamID_Mother, sex = MomGender ,interview_age, interview_date, starts_with("srm"), pkbs_total, visit = Timepoint))
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = "mom_guid", src_subject_id = "FamID_Mother", sex = "MomGender", interview_age, interview_date, starts_with("srm"), pkbs_total, visit = "Timepoint"))
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = "mom_guid", src_subject_id = "FamID_Mother", sex = "MomGender", interview_age, interview_date, starts_with("srm"), pkbs_total, visit = "Timepoint"))
NDA_PKBS_Prep <- select(PKBS_Prep, c(visit = "Timepoint"))
Pedigree <- read.csv("Reference_Pedigree.csv")
NDA_PKBS <- read.csv("pkbs01_template.csv", skip = 1)
#Import PKBS files from both sites and every timepoint
UO_T1_PKBS <- read.csv("UO_T1_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T1_PKBS <- read.csv("UPMC_T1_PKBS.csv", stringsAsFactors = FALSE)
UO_T2_PKBS <- read.csv("UO_T2_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T2_PKBS <- read.csv("UPMC_T2_PKBS.csv", stringsAsFactors = FALSE)
UO_T3_PKBS <- read.csv("UO_T3_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T3_PKBS <- read.csv("UPMC_T3_PKBS.csv", stringsAsFactors = FALSE)
UO_T4_PKBS <- read.csv("UO_T4_Qualtrics.csv", stringsAsFactors = FALSE)
UPMC_T4_PKBS <- read.csv("UPMC_T4_PKBS.csv", stringsAsFactors = FALSE)
#Rename variables that we want to select for PKBS
#Create list of new variable names
pkbs <- "srm_pkbs"
num_items <- seq(1:33)
new_PKBS_names <- paste(pkbs, num_items, sep='_')
#Now make a list of old variables names so that we can replace them with the neww ones
UO_Q407 <- "Q407"
UO_Q359 <- "Q359"
UO_Q524 <- "Q524"
UO_Q817 <- "Q817"
UPMC_Q16 <- "Q16.1"
UPMC_Q13 <- "Q13.1"
old_UO_PKBS_names <- paste(UO_Q407, num_items,sep = "_")
old_UO_PKBS_names2 <- paste(UO_Q359, num_items,sep = "_")
old_UO_PKBS_names3 <- paste(UO_Q524, num_items,sep = "_")
old_UO_PKBS_names4 <- paste(UO_Q817, num_items,sep = "_")
old_UPMC_PKBS_names <- paste(UPMC_Q16, num_items,sep = "_")
old_UPMC_PKBS_names2 <- paste(UPMC_Q13, num_items, sep = "_")
#Change UO column names
setnames(UO_T1_PKBS, old_UO_PKBS_names, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T2_PKBS, old_UO_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T3_PKBS, old_UO_PKBS_names3, new_PKBS_names, skip_absent=FALSE)
setnames(UO_T4_PKBS, old_UO_PKBS_names4, new_PKBS_names, skip_absent=FALSE)
#Change UPMC column names
setnames(UPMC_T1_PKBS, old_UPMC_PKBS_names, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T2_PKBS, old_UPMC_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T3_PKBS, old_UPMC_PKBS_names2, new_PKBS_names, skip_absent=FALSE)
setnames(UPMC_T4_PKBS, old_UPMC_PKBS_names, new_PKBS_names, skip_absent=FALSE)
#Edit UO PKBS Times 1-4 to have only PKBS questions and the FamID
UO_T1_PKBS <- select(UO_T1_PKBS, c(FamID = Q221, contains("pkbs")))
UO_T2_PKBS <- select(UO_T2_PKBS, c(FamID = Q116, contains("pkbs")))
UO_T3_PKBS <- select(UO_T3_PKBS, c(FamID = Q174, contains("pkbs")))
UO_T4_PKBS <- select(UO_T4_PKBS, c(FamID = Q203, contains("pkbs")))
#Edit UPMC PKBS Times 1-4 to have only PKBS questions and the FamID
UPMC_T1_PKBS <- select(UPMC_T1_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T2_PKBS <- select(UPMC_T2_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T3_PKBS <- select(UPMC_T3_PKBS, c(FamID = Q1.2, contains("pkbs")))
UPMC_T4_PKBS <- select(UPMC_T4_PKBS, c(FamID = Q1.2, contains("pkbs")))
#Merge UO and UPMC data by Timepoint
PKBS_T1 <- rbind(UO_T1_PKBS, UPMC_T1_PKBS)
PKBS_T2 <- rbind(UO_T2_PKBS, UPMC_T2_PKBS)
PKBS_T3 <- rbind(UO_T3_PKBS, UPMC_T3_PKBS)
PKBS_T4 <- rbind(UO_T4_PKBS, UPMC_T4_PKBS)
#Clean up environment
rm(UO_T1_PKBS, UO_T2_PKBS, UO_T3_PKBS, UO_T4_PKBS, UPMC_T1_PKBS, UPMC_T2_PKBS, UPMC_T3_PKBS, UPMC_T4_PKBS)
#Create the Pedigree table for each timepoint
Pedigree_T1 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time1Date, MomAge_T1)
Pedigree_T2 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time2Date, MomAge_T2)
Pedigree_T3 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time3Date, MomAge_T3)
Pedigree_T4 <- select(Pedigree, FamID, FamID_Mother, mom_guid, MomGender, Time4Date, MomAge_T4)
#Merge Pedigree data to PKBS timepoints
PKBS_T1 <- merge(Pedigree_T1, PKBS_T1, by = "FamID")
PKBS_T2 <- merge(Pedigree_T2, PKBS_T2, by = "FamID")
PKBS_T3 <- merge(Pedigree_T3, PKBS_T3, by = "FamID")
PKBS_T4 <- merge(Pedigree_T4, PKBS_T4, by = "FamID")
#Clean up environment
rm(Pedigree, Pedigree_T1, Pedigree_T2, Pedigree_T3, Pedigree_T4)
#Create new column designating time point for each database
PKBS_T1$Timepoint <- "Time 1"
PKBS_T2$Timepoint <- "Time 2"
PKBS_T3$Timepoint <- "Time 3"
PKBS_T4$Timepoint <- "Time 4"
#Rename each of the Date and Age columns so that they match
PKBS_T1 <- PKBS_T1 %>% rename( interview_date = Time1Date, interview_age = MomAge_T1)
PKBS_T2 <- PKBS_T2 %>% rename( interview_date = Time2Date, interview_age = MomAge_T2)
PKBS_T3 <- PKBS_T3 %>% rename( interview_date = Time3Date, interview_age = MomAge_T3)
PKBS_T4 <- PKBS_T4 %>% rename( interview_date = Time4Date, interview_age = MomAge_T4)
#Merge all timepoints together to create the PKBS prep sheet
PKBS_Prep <- rbind(PKBS_T1, PKBS_T2, PKBS_T3, PKBS_T4)
#Clean up environment
rm(PKBS_T1, PKBS_T2, PKBS_T3, PKBS_T4)
#Turn Likert Scale from text string to numeric value
PKBS_Prep[PKBS_Prep == "Never (0)"] <- 0; PKBS_Prep[PKBS_Prep == "Rarely (1)"] <- 1;
PKBS_Prep[PKBS_Prep == "Sometimes (2)"] <- 2; PKBS_Prep[PKBS_Prep == "Often (3)"] <- 3;
# Change number to numeric values and Create Calculated Column
PKBS_Prep[,7:39] <- sapply(PKBS_Prep[,7:39],as.numeric)
PKBS_Prep  <- add_column(PKBS_Prep, pkbs_total = rowSums(PKBS_Prep[, c("srm_pkbs_1", "srm_pkbs_2","srm_pkbs_3","srm_pkbs_4", "srm_pkbs_5", "srm_pkbs_6",
"srm_pkbs_7", "srm_pkbs_8", "srm_pkbs_9", "srm_pkbs_10", "srm_pkbs_11", "srm_pkbs_12", "srm_pkbs_13",
"srm_pkbs_14", "srm_pkbs_15", "srm_pkbs_16", "srm_pkbs_17", "srm_pkbs_18", "srm_pkbs_19", "srm_pkbs_20",
"srm_pkbs_21", "srm_pkbs_22", "srm_pkbs_23", "srm_pkbs_24", "srm_pkbs_25", "srm_pkbs_26", "srm_pkbs_27",
"srm_pkbs_28", "srm_pkbs_29", "srm_pkbs_30", "srm_pkbs_31", "srm_pkbs_32", "srm_pkbs_33")]),.after = "srm_pkbs_33")
#Create list of column names for PKBS prep and NDA structure
NDA_PKBS_Prep <- select(PKBS_Prep, c(subjectkey = "mom_guid", src_subject_id = "FamID_Mother", sex = "MomGender", interview_age, interview_date, starts_with("srm"), pkbs_total))
NDA_PKBS_Prep <- select(PKBS_Prep, c(visit = "Timepoint"))
NDA_names <- c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social25",
"Social28", "Social29", "Social30", "Social32", "Social5", "Social14", "Social15", "Social17",
"Social19", "Social20", "Social21", "Social24", "Social27", "Social33", "Social34", "Social1",
"Social3", "Social6", "Social8", "P_soc_23_ft", "Social11", "Social13", "Social18", "Social26",
"Social31")
setnames(NDA_PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
colnames(NDA_PKBS_Prep)[39] <- "basc_social_raw"
View(NDA_PKBS_Prep)
View(NDA_PKBS)
NDA_PKBS_Prep <- select(PKBS_Prep, c(visit = "Timepoint", subjectkey = "mom_guid", src_subject_id = "FamID_Mother", sex = "MomGender", interview_age, interview_date, starts_with("srm"), pkbs_total))
View(NDA_PKBS_Prep)
NDA_names <- c("Social2", "Social7", "Social10", "Social12", "Social16", "Social22", "Social23", "Social25",
"Social28", "Social29", "Social30", "Social32", "Social5", "Social14", "Social15", "Social17",
"Social19", "Social20", "Social21", "Social24", "Social27", "Social33", "Social34", "Social1",
"Social3", "Social6", "Social8", "P_soc_23_ft", "Social11", "Social13", "Social18", "Social26",
"Social31")
setnames(NDA_PKBS_Prep, new_PKBS_names, NDA_names, skip_absent = FALSE)
colnames(NDA_PKBS_Prep)[39] <- "basc_social_raw"
#Merge PKBS Prep Sheet into NDA structure
NDA_PKBS <- bind_rows(NDA_PKBS_Prep, NDA_PKBS)
View(NDA_PKBS)
first_line <- matrix("", nrow = 1, ncol = ncol(NDA_PKBS))
first_line[,1] <- "pkbs"
first_line[,2] <- "1"
write.table(first_line, file = "pkbs.csv", sep = ",", append = FALSE, quote = FALSE, na = "", col.names = FALSE, row.names = FALSE)
write.table(NDA_PKBS, file = 'pkbs.csv', sep = ",", append = TRUE, na = "", quote = FALSE, row.names = FALSE)
View(NDA_PKBS)
install.packages("rmarkdown")
library("rmarkdown", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
install.packages("rmarkdown")
library("rmarkdown", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
install.packages("caTools")
options(repos = c(CRAN="https://cloud.r-project.org"))
install.packages("rmarkdown")
