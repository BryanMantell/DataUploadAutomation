"0",""
"0","#Progress DBT_WCCL Table"
"0","Progress <- select(WCCL_PREP, c(FamID, GroupAssignment, timepoint, starts_with(""srm"")))"
"0",""
"0","#calculate rowmeans for each individual"
"0","Progress$Row_Mean <- rowMeans(select(WCCL_PREP,c(starts_with(""srm""))), na.rm = T)"
"0",""
"0","# Change FamId as character and assign to ID variable "
"0","ID <- c(as.character(Progress$FamID))"
"0",""
"0","# Add Site column to Progress, if ID start with 9 then site is UO, else is UPMC"
"0","Progress$site <- ifelse(startsWith(ID, ""9""),""UO"",""UPMC"")"
"0",""
"0","# Group by GroupAssissignment and Timepoint, and calculate the Group Mean"
"0","Progress_Mean <- Progress %>%"
"0","  group_by(GroupAssignment,timepoint,site) %>%"
"0","  summarise(GroupMean = mean(Row_Mean,na.rm = T),count = n())"
"0",""
"0","# Select only UO Mean"
"0","UO <- Progress_Mean[Progress_Mean$site == ""UO"",]"
"0","# Select only UPMC Mean "
"0","UPMC <- Progress_Mean[Progress_Mean$site == ""UPMC"",]"
"0",""
"0","# Calculate Both site Means "
"0","Both_site_Mean <- Progress_Mean %>%"
"0","  group_by(GroupAssignment, timepoint) %>%"
"0","  summarise(BothSiteMean = mean(GroupMean,na.rm = T),n = sum(count))"
"0",""
"0","#Progress_Mean <- Progress_Mean[order(GroupAssignment),] "
"0",""
"0",""
"0","# Change GroupMean Column names according to site"
"0","colnames(UO)[colnames(UO) == ""GroupMean""] = ""UO_WCCL"""
"0","colnames(UPMC)[colnames(UPMC) == ""GroupMean""] = ""UPMC_WCCL"""
"0",""
"0","# Combine UO,UPMC and both_site data "
"0","Mean_Table <- data.frame(UO[,c(""UO_WCCL"",""GroupAssignment"")],UPMC[,""UPMC_WCCL""],Both_site_Mean[,c(""BothSiteMean"",""n"")])"
"0",""
"0","#Mean_Table <- select(Mean_Table, -c(GroupAssignment))"
"0",""
"0","# Convert Mean_Table, make original column as row"
"0","Mean_Table <- t(Mean_Table)"
"0",""
"0","# Make Mean_Table as a data.frame"
"0","Mean_Table <- data.frame(Mean_Table)"
"0",""
"0","# Add Timepoint column "
"0","Timepoint_names <- c(""T1"",""T2"", ""T3"", ""T4"",""T1"",""T2"", ""T3"", ""T4"",""T1"",""T2"", ""T3"", ""T4"")"
"0",""
"0","# Rename column name "
"0","setnames(Mean_Table, names(Mean_Table), Timepoint_names)"
"0",""
"0",""
