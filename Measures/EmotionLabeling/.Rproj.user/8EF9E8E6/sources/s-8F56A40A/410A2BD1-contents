---
title: "Emotion_Labeling"
author: "Kyle Murray"
date: "6/3/2020"
output: html_document

```{r Setup}
#Clear Environment Setup
rm(list = ls())
#Enable Packages
library(dplyr)
library(tidyverse)
library(eeptools)
library(data.table)
```
```{r Import}
Emotion_Labeling_REDCAP <- read.csv("Redcap_Data.csv")
Emotion_Labeling_Prep <- read.csv("Reference_Pedigree.csv")
Emotion_Labeling_NDA <- read.csv("elt01_template.csv", skip=1)
```
```{r Select Required Pedigree Info}
#Add Required Pedigree Info to Prep Sheet
Emotion_Labeling_Prep <- select(Emotion_Labeling_Prep, child_guid, child_famID = FamID_Child, interview_age = ChildAge_Intake, interview_date = IntakeDate, sex = ChildGender)
```

```{r Rename Columns}
#rename elt_exp names
eltpart1_exp <- "oc_elt_exp"
num_items <- seq(1:8)
new_eltpart1_names <- paste(eltpart1_exp, num_items, sep = "_")

#rename elt_rec names
eltpart2_rec <- "oc_elt_rec"
num_items <- seq (1:4) 
new_eltpart2_names <- paste(eltpart2_rec, num_items, sep = "_")

#replace old eltpart1 names with new names
eltpart1_exp <- "eltpart1_exp"
num_items <- seq (1:8)
old_eltpart1_names <- paste(eltpart1_exp, num_items, sep = "")

setnames(Emotion_Labeling_REDCAP, old_eltpart1_names, new_eltpart1_names)

#replace old eltpart2 names with new names
eltpart2_rec <- "eltpart2_rec"
num_items <- seq (1:4)
old_eltpart2_names <- paste(eltpart2_rec, num_items, sep = "")

setnames(Emotion_Labeling_REDCAP, old_eltpart2_names, new_eltpart2_names)

#rename Emotion_Labeling_REDCAP
names(Emotion_Labeling_REDCAP)[names(Emotion_Labeling_REDCAP) == "redcap_event_name"] <- "timepoint"
```
``` {r Merge REDCAP to Prep}
#select necessary info from REDCAP dataframe
Emotion_Labeling_REDCAP <- select(Emotion_Labeling_REDCAP, c(famID, contains("oc_elt")))



